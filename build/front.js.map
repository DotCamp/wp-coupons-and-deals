{"version":3,"file":"front.js","mappings":"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","sources":["webpack://wp-coupons-and-deals/./src/front.js"],"sourcesContent":["class UBCoupon {\n  constructor(wrapper) {\n    this.wrapper = wrapper;\n    this.expirationDateWrapper = this.wrapper.querySelector(\n      \".wpcd-coupon-expiration-date\"\n    );\n    this.copyButton = this.wrapper.querySelector(\n      \".wpcd-coupon-button:not(.wpcd-popup-button)\"\n    );\n    this.showCodeButton = this.wrapper.querySelector(\n      \".wpcd-coupon-button.wpcd-popup-button\"\n    );\n\n    this.expirationDate = new Date(\n      this.wrapper.dataset.expiration_date\n    ).getTime();\n    this.expiredDateText = this.wrapper.dataset.expired_date_text;\n    this.couponCode = this.wrapper.dataset.coupon_code;\n    this.init();\n  }\n\n  init() {\n    this.checkExpirationDate();\n    this.setupCopyButton();\n    this.handleHiddenCoupon();\n    this.handleTemplateTwoExpirationDate();\n    const url = new URL(location);\n    const couponIdParam = url?.searchParams?.get(\"wpcd_coupon\");\n    if (\n      this.wrapper.classList.contains(\"wpcd-coupon-hidden\") &&\n      this.showCodeButton &&\n      !couponIdParam\n    ) {\n      this.handleShowCode();\n    }\n  }\n  handleTemplateTwoExpirationDate() {\n    if (!this.wrapper.classList.contains(\"wpcd-coupon-template-two\")) {\n      return;\n    }\n    const secondSpan = this.expirationDateWrapper.querySelectorAll(\"span\")[1];\n    if (!secondSpan) return;\n\n    const updateCountdown = () => {\n      const now = new Date().getTime();\n      const distance = this.expirationDate - now;\n\n      if (distance < 0) {\n        secondSpan.textContent = this.expiredDateText;\n        return;\n      }\n\n      const weeks = Math.floor(distance / (1000 * 60 * 60 * 24 * 7));\n      const days = Math.floor(\n        (distance % (1000 * 60 * 60 * 24 * 7)) / (1000 * 60 * 60 * 24)\n      );\n      const hours = Math.floor(\n        (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n      );\n      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n      const seconds = Math.floor((distance % (1000 * 60)) / 1000);\n\n      secondSpan.textContent = `${weeks} weeks ${days} days ${hours} hours ${minutes} minutes ${seconds} seconds`;\n    };\n\n    updateCountdown();\n    setInterval(updateCountdown, 1000);\n  }\n  handleShowCode() {\n    this.showCodeButton.addEventListener(\"click\", () => {\n      const couponId = this.wrapper.getAttribute(\"data-coupon_id\");\n      const url = new URL(location);\n      url.searchParams.set(\"wpcd_coupon\", couponId);\n      window.open(url, \"_blank\");\n    });\n  }\n\n  handleHiddenCoupon() {\n    if (!this.wrapper.classList.contains(\"wpcd-coupon-hidden\")) {\n      return;\n    }\n    const url = new URL(location);\n    const couponId = url?.searchParams?.get(\"wpcd_coupon\");\n    if (!couponId || couponId === \"null\") {\n      return;\n    }\n    const couponPopup = document.getElementById(couponId);\n    const couponTargetButton = this.wrapper.querySelector(\n      \".wpcd-coupon-button.wpcd-popup-button\"\n    );\n    couponTargetButton.removeAttribute(\"href\");\n\n    couponTargetButton.classList.add(\"wpcd-coupon-popup-opened\");\n\n    couponPopup.style.display = \"block\";\n    const closeButton = couponPopup.querySelector(\n      \".wpcd-coupon-popup-close-button\"\n    );\n    closeButton.addEventListener(\"click\", () => {\n      couponPopup.style.display = \"none\";\n    });\n  }\n\n  checkExpirationDate() {\n    const currentDate = Date.now();\n    const isDateExpired = currentDate > this.expirationDate;\n\n    if (isDateExpired) {\n      this.expirationDateWrapper.textContent = this.expiredDateText;\n      this.expirationDateWrapper.classList.add(\"wpcd-coupon-expired\");\n    }\n  }\n  setupCopyButton() {\n    const copyButtonText = this.copyButton.innerText;\n    this.copyButton.addEventListener(\"click\", () => {\n      this.copyButton.innerText = \"Copied!\";\n      this.copyToClipboard();\n      setTimeout(() => {\n        this.copyButton.innerText = copyButtonText.trim();\n      }, 1000);\n    });\n  }\n\n  async copyToClipboard() {\n    const temporaryInput = document.createElement(\"input\");\n    temporaryInput.value = this.couponCode;\n    temporaryInput.type = \"text\";\n    document.body.appendChild(temporaryInput);\n    temporaryInput.select();\n    document.execCommand(\"Copy\");\n    document.body.removeChild(temporaryInput);\n  }\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  const couponWrappers = document.querySelectorAll(\n    \".wpcd-coupon-wrapper:not(.wpcd-coupon-type-deal)\"\n  );\n  couponWrappers.forEach((wrapper) => {\n    new UBCoupon(wrapper);\n  });\n});\n"],"names":["UBCoupon","constructor","wrapper","expirationDateWrapper","querySelector","copyButton","showCodeButton","expirationDate","Date","dataset","expiration_date","getTime","expiredDateText","expired_date_text","couponCode","coupon_code","init","checkExpirationDate","setupCopyButton","handleHiddenCoupon","handleTemplateTwoExpirationDate","url","URL","location","couponIdParam","searchParams","get","classList","contains","handleShowCode","secondSpan","querySelectorAll","updateCountdown","now","distance","textContent","weeks","Math","floor","days","hours","minutes","seconds","setInterval","addEventListener","couponId","getAttribute","set","window","open","couponPopup","document","getElementById","couponTargetButton","removeAttribute","add","style","display","closeButton","currentDate","isDateExpired","copyButtonText","innerText","copyToClipboard","setTimeout","trim","temporaryInput","createElement","value","type","body","appendChild","select","execCommand","removeChild","couponWrappers","forEach"],"sourceRoot":""}