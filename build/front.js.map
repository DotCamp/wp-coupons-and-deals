{"version":3,"file":"front.js","mappings":"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","sources":["webpack://wp-coupons-and-deals/./src/front.js"],"sourcesContent":["class UBCoupon {\n  constructor(wrapper) {\n    this.wrapper = wrapper;\n    this.expirationDateWrapper = this.wrapper.querySelector(\n      \".wpcd-coupon-expiration-date\"\n    );\n    this.copyButton = this.wrapper.querySelector(\n      \".wpcd-coupon-button:not(.wpcd-popup-button)\"\n    );\n    this.showCodeButton = this.wrapper.querySelector(\n      \".wpcd-coupon-button.wpcd-popup-button\"\n    );\n\n    this.expirationDate = new Date(\n      this.wrapper.dataset.expiration_date\n    ).getTime();\n    this.expiredDateText = this.wrapper.dataset.expired_date_text;\n    this.couponCode = this.wrapper.dataset.coupon_code;\n    this.init();\n  }\n\n  init() {\n    this.checkExpirationDate();\n    this.setupCopyButton();\n    this.handleHiddenCoupon();\n    const url = new URL(location);\n    const couponIdParam = url?.searchParams?.get(\"wpcd_coupon\");\n    if (\n      this.wrapper.classList.contains(\"wpcd-coupon-hidden\") &&\n      this.showCodeButton &&\n      !couponIdParam\n    ) {\n      this.handleShowCode();\n    }\n  }\n  handleShowCode() {\n    this.showCodeButton.addEventListener(\"click\", () => {\n      const couponId = this.wrapper.getAttribute(\"data-coupon_id\");\n      const url = new URL(location);\n      url.searchParams.set(\"wpcd_coupon\", couponId);\n      window.open(url, \"_blank\");\n    });\n  }\n\n  handleHiddenCoupon() {\n    if (!this.wrapper.classList.contains(\"wpcd-coupon-hidden\")) {\n      return;\n    }\n    const url = new URL(location);\n    const couponId = url?.searchParams?.get(\"wpcd_coupon\");\n    if (!couponId || couponId === \"null\") {\n      return;\n    }\n    const couponPopup = document.getElementById(couponId);\n    const couponTargetButton = this.wrapper.querySelector(\n      \".wpcd-coupon-button.wpcd-popup-button\"\n    );\n    couponTargetButton.removeAttribute(\"href\");\n\n    couponTargetButton.classList.add(\"wpcd-coupon-popup-opened\");\n\n    couponPopup.style.display = \"block\";\n    const closeButton = couponPopup.querySelector(\n      \".wpcd-coupon-popup-close-button\"\n    );\n    closeButton.addEventListener(\"click\", () => {\n      couponPopup.style.display = \"none\";\n    });\n  }\n\n  checkExpirationDate() {\n    const currentDate = Date.now();\n    const isDateExpired = currentDate > this.expirationDate;\n\n    if (isDateExpired) {\n      this.expirationDateWrapper.textContent = this.expiredDateText;\n      this.expirationDateWrapper.classList.add(\"wpcd-coupon-expired\");\n    }\n  }\n  setupCopyButton() {\n    const copyButtonText = this.copyButton.innerText;\n    this.copyButton.addEventListener(\"click\", () => {\n      this.copyButton.innerText = \"Copied!\";\n      this.copyToClipboard();\n      setTimeout(() => {\n        this.copyButton.innerText = copyButtonText.trim();\n      }, 1000);\n    });\n  }\n\n  async copyToClipboard() {\n    const temporaryInput = document.createElement(\"input\");\n    temporaryInput.value = this.couponCode;\n    temporaryInput.type = \"text\";\n    document.body.appendChild(temporaryInput);\n    temporaryInput.select();\n    document.execCommand(\"Copy\");\n    document.body.removeChild(temporaryInput);\n  }\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  const couponWrappers = document.querySelectorAll(\n    \".wpcd-coupon-wrapper:not(.wpcd-coupon-type-deal)\"\n  );\n  couponWrappers.forEach((wrapper) => {\n    new UBCoupon(wrapper);\n  });\n});\n"],"names":["UBCoupon","constructor","wrapper","expirationDateWrapper","querySelector","copyButton","showCodeButton","expirationDate","Date","dataset","expiration_date","getTime","expiredDateText","expired_date_text","couponCode","coupon_code","init","checkExpirationDate","setupCopyButton","handleHiddenCoupon","url","URL","location","couponIdParam","searchParams","get","classList","contains","handleShowCode","addEventListener","couponId","getAttribute","set","window","open","couponPopup","document","getElementById","couponTargetButton","removeAttribute","add","style","display","closeButton","currentDate","now","isDateExpired","textContent","copyButtonText","innerText","copyToClipboard","setTimeout","trim","temporaryInput","createElement","value","type","body","appendChild","select","execCommand","removeChild","couponWrappers","querySelectorAll","forEach"],"sourceRoot":""}